<html>

<head>
    <link rel="stylesheet" href="bootstrap.css">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-xl-6">
                <div class="score"
                    style="background-color: aquamarine;height:150px;border-radius: 20px;margin-top:10px;">
                    <h2><strong>Score Board: </strong></h2>
                    <p id="para1"></p>
                    <p id="para2"></p>
                </div>
                <div>
                    <button type="button" class="btn btn-primary btn-lg" onclick="try1()" id="b1">RUN</button>
                </div>
                <div class="players">
                    <label id='p1'>PLAYER 1 : </label>
                    <p id="1"></p> <br>
                    <label id='p2'>PLAYER 2 : </label>
                    <p id="2"></p>
                    <br>
                    <label id='p3'>PLAYER 3 : </label>
                    <p id="3"></p>
                    <br>
                    <label id='p4'>PLAYER 4 : </label>
                    <p id="4"></p>
                    <br>
                    <label id='p5'>PLAYER 5 : </label>
                    <p id="5"></p>
                    <br>
                    <label id='p6'>PLAYER 6 : </label>
                    <p id="6"></p>
                    <br>
                    <label id='p7'>PLAYER 7 : </label>
                    <p id="7"></p>
                    <br>
                    <label id='p8'>PLAYER 8 : </label>
                    <p id="8"></p>
                    <br>
                    <label id='p9'>PLAYER 9 : </label>
                    <p id="9"></p>
                    <br>
                    <label id='p10'>PLAYER 10: </label>
                    <p id="10"></p>
                    <br>

                </div>
            </div>
            <div class="col-xl-6">
                <div class="score"
                    style="background-color: aquamarine;height:150px;border-radius: 20px;margin-top:10px;">
                    <h2><strong>Score Board: </strong></h2>
                    <p id="para3"></p>
                    <p id="para4"></p>
                </div>
                <div>
                    <button type="button" class="btn btn-primary btn-lg" onclick="try2()" id="b2">RUN</button>
                </div>
                <div class="players">
                    <label id='p1'>PLAYER 1 : </label>
                    <p id="11"></p> <br>
                    <label id='p2'>PLAYER 2 : </label>
                    <p id="12"></p>
                    <br>
                    <label id='p3'>PLAYER 3 : </label>
                    <p id="13"></p>
                    <br>
                    <label id='p4'>PLAYER 4 : </label>
                    <p id="14"></p>
                    <br>
                    <label id='p5'>PLAYER 5 : </label>
                    <p id="15"></p>
                    <br>
                    <label id='p6'>PLAYER 6 : </label>
                    <p id="16"></p>
                    <br>
                    <label id='p7'>PLAYER 7 : </label>
                    <p id="17"></p>
                    <br>
                    <label id='p8'>PLAYER 8 : </label>
                    <p id="18"></p>
                    <br>
                    <label id='p9'>PLAYER 9 : </label>
                    <p id="19"></p>
                    <br>
                    <label id='p10'>PLAYER 10: </label>
                    <p id="20"></p>
                    <br>

                </div>
            </div>
            <div class="row">
                <div class="col-xl-12 offset-xl-10">
                    <button class="btn btn-lg btn-success"><a href="score.html">Final Score</a> </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        var sum = 0;
        var sum2 = 0;
        var score1 = [];
        var score2 = [];
        var player1 = 0;
        var player2 = 0;
        var id1 = 1;
        var id2 = 11;
        var runs1 = 6;
        var runs2 = 6;
        var arr1 = [];
        var arr2 = [];
        var res;
        var result1 = [];
        var result2 = [];
        var h, j;

        function gameTime(b) {
            setTimeout(() => {
                var t = b;
                if (t == 'b1') {
                    document.getElementById(t).disabled = true;
                    alert("TIME OUT");
                }
                else {
                    document.getElementById(t).disabled = true;
                    alert("TIME OUT");
                }
            }, 60000)
        }
        function try1() {
            if (player1 == 1) {
                gameTime('b1')
            }
            if (player1 < 10) {
                document.getElementById('b2').disabled = true;
                var min = 0;
                var max = 6;
                var random1 = Math.floor(Math.random() * (+max - +min)) + +min;

                if (random1 > 0 && runs1 > 0) {
                    arr1.push(random1);
                    console.log('pushed' + random1);
                    document.getElementById(id1).innerHTML = arr1;
                    runs1 = runs1 - 1;
                }
                else if (random1 == 0) {
                    if (arr1.length >= 1) {
                        res = arr1.reduce(function (init, item) {
                            return init + item
                        });
                        result1.push(res);
                    }
                    else {
                        result1.push(0);
                    }
                    score1.push(arr1);
                    arr1 = [];
                    document.getElementById('para2').innerHTML = 'player ' + +(player1 + 1) + ' out';
                    console.log('player ' + +(player1 + 1) + ' out');
                    player1 += 1;

                    id1 = id1 + 1;
                }
                else if (runs1 == 0) {
                    if (arr1.length >= 1) {
                        res = arr1.reduce(function (init, item) {
                            return init + item
                        });
                        result1.push(res);
                    }
                    else {
                        result1.push(0);
                    }
                    runs1 = 6;
                    score1.push(arr1);
                    arr1 = [];
                    id1 = id1 + 1;
                    player1 = player1 + 1;

                }
            }
            else if (player1 === 10) {
                document.getElementById('b2').disabled = false;
                score1.forEach(function (item) {
                    item.forEach(function (i) {

                        sum = sum + i;
                        player1 = player1 + 1;
                    })
                })
                console.log(sum)
                document.getElementById('para1').innerHTML = "<h4>Total Score : " + sum + "<h4>";
                localStorage.setItem('res1', sum);
                localStorage.setItem('arr1', result1);
                console.log(result1);
                var a = result1[0];
                for (let i = 1; i < result1.length; i++) {

                    if (a <= result1[i]) {
                        a = result1[i];
                        h = i;
                    }
                }
                console.log(a, h);
                localStorage.setItem('mom1', h);
            }
        }
        function try2() {
            if (player1 == 1) {
                gameTime('b2')
            }
            if (player2 < 10) {
                document.getElementById('b1').disabled = true;
                var min = 0;
                var max = 6;
                var random2 = Math.floor(Math.random() * (+max - +min)) + +min;

                if (random2 > 0 && runs2 > 0) {
                    arr2.push(random2);
                    console.log('pushed' + random2);
                    document.getElementById(id2).innerHTML = arr2;
                    runs2 = runs2 - 1;
                }
                else if (random2 == 0) {
                    if (arr2.length >= 1) {
                        res = arr2.reduce(function (init, item) {
                            return init + item
                        });
                        result2.push(res);
                    }
                    else {
                        result2.push(0);
                    }

                    score2.push(arr2);
                    arr2 = [];

                    document.getElementById('para4').innerHTML = 'player ' + +(player2 + 1) + ' out';
                    console.log('player ' + +(player2 + 1) + ' out');
                    player2 += 1;

                    id2 = id2 + 1;

                }
                else if (runs2 == 0) {

                    if (arr2.length >= 1) {
                        res = arr2.reduce(function (init, item) {
                            return init + item
                        });
                        result2.push(res);
                    }
                    else {

                        result2.push(0);
                    }
                    runs2 = 6;
                    score2.push(arr2);
                    arr2 = [];
                    id2 = id2 + 1;
                    player2 = player2 + 1;
                }
            }

            else if (player2 === 10) {
                document.getElementById('b1').disabled = false;
                score2.forEach(function (item) {
                    item.forEach(function (i) {

                        sum2 = sum2 + i;
                        player2 = player2 + 1;
                    })
                })
                console.log(sum2)
                document.getElementById('para3').innerHTML = "<h4>Total Score : " + sum2 + "<h4>";
                localStorage.setItem('res2', sum2);
                localStorage.setItem('arr2', result2);
                console.log(result2);

                var b = result2[0];
                for (let i = 1; i < result2.length; i++) {
                    if (b <= result2[i]) {
                        b = result2[i];
                        j = i;

                    }
                }
                console.log(b, j);
                localStorage.setItem('mom2', j);
            }
        }
    </script>

</body>

</html>